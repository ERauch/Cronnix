<HTML>
<head><META http-equiv="content-type" content="text/html;charset=UTF-8">
<title>FAQ と使い方の Tips</title>
</head>
<body>

<h2>FAQ と使い方の Tips</h2>

<p><i><b>CronniX はオープンソースとしてリリースされているのですか？</b></i></p>

はい。バージョン 1.5 からは CronniX をオープンソースとしてリリースしています。しかし、常に最新バージョンを逐次オープンソース化できるわけではありませんので、その点は堪忍してください。

<hr>



<p><i><b>cron を起動するには何をすればよいですか？</b></i>

<p>cron は常に動作しているシステムプロセスです。スケジュールにしたがって処理を実行させるには、crontab を編集し変更内容を保存するだけでよいのです。cron は毎分すべてのファイルを参照し、ペンディングになっている処理を実行します。


<hr>


<p><i><b>自分の crontab が動作しているかどうかを確認するには？</b></i><br>

<p>crontab の設定は少々扱いにくい場合があります。といいますのも、コマンドライン上では問題なく動作するスクリプトでも、cron から実行させた場合は、実行環境の差異のために動作しないことがあるからです。cron の出力を crontab のオーナーあてにメールで送信すると便利です。



<p><i><FONT
		COLOR=#ff0000>以下は OSX 10.1 以前の場合です。Jaguar に関しては次項をご覧ください。</font></i>

<p>ローカルのメールを受信するには、Mail.app で特別なメールアカウントを作成する必要があります。これは <a href=http://www.macosxhints.com>www.macosxhints.com</a> で紹介されていた方法です：

<p>"簡単な方法"<br>
Authored by: frjo on Tue, May 8 at 11:05AM
<ul>
<li>Mail を起動し、まだあなたのユーザ名の Unix メールアカウントが作成されていなければ、作成します。
<li>“メールボックス”をクリック、リストから“パーソナルメールボックス”を選択し、“メールボックス”メニューの“新規メールボックス…”を選択します。新たに作成されたメールボックスを“Active”という名前にしたら、Mail をいったん終了し、再起動します。
<li>あなたあてに送られたすべてのローカルメールが“Active”メールボックスに振り分けられます。これはある古株の NeXTSTEP ユーザに教わった方法です
</ul>

<p>ローカルメールを送信するために sendmail を動作させる必要はありませんので、ローカルメール（当然 cron からのメールも含まれる）を受信するためにするべきことは、基本的に以上ですべてです。また、root あてのメールをあなたのアカウントへ転送することもできます。あなたのユーザ名を記した“.forward”という名前のファイルを作成し、root のホームディレクトリ（/private/var/root）に置いておけば OK です。




<p><i><FONT
		COLOR=#ff0000>以下は OSX 10.2（Jaguar）の場合です。</font></i>

<p>Jaguar では、Mail.app のアカウント設定項目から‘Unix メールアカウント’というアカウントの種類が消えてしまったようです。再インストールしない限りは、古い‘UNIX’タイプのエントリーが ~/Library/Mail/ に残ってはいますが、無視されます。

<p>再びローカルメールを見られるようにするには、次のようにします：

<ul>
<li>Mail.app を終了します（用心のため）。

<li>ターミナルで“sudo chmod 1777 /var/mail”を実行。<br>
	こうしておかないと、Mail.app はメールボックスファイルを読み込んでくれません。

<li> cd ~/Mailboxes/INBOX.mbox

<li> mv mbox mbox.bak

<li> /var/mail 内のあなたのメールボックスのシンボリックリンクを作成します。このメールボックスにはあなたのユーザ名がつけられています（メールアカウントを持っていない場合は、存在しません）。例えば、私のユーザ名は‘sas’なので、次のようにします：<br>
	ln -s /var/mail/sas mbox<br>
	これにより、‘mbox’という名前で、/var/mail（sendmail がローカルメールを保存する場所）内の私のメールボックスへのリンクが作成されます。
</ul>

テスト：
<ul>

<li>sendmail が動作していることを確認してください：
	<ul>
    <li>/etc/hostconfig 内の記載を MAILSERVER=-YES- と書き換える
    <li>ターミナルで“sudo chmod g-w /”を実行する
    <li>ターミナルで“sudo SystemStarter start SMTP”を実行する<br>
   （以前は sendmail が動作していなくてもローカルメールを送信できたが、Jaguar では不可能になった。なぜかは知らないが。）
	</ul>
<li>ローカルメールを送信してみる。例えば：<br>
	echo test | mail -s Testmail sas<br>
   （‘sas’の箇所はあなたのユーザ名に置き換えてください）
<li>Mail.app の受信ボックス内のフォルダ‘On My Mac’を見て、動作しているかどうか確認する

</ul>

注意：

<p>こうしたメールを読む設定は、ローカル受信ボックスからメールを削除しない限り保たれます。メールを削除してしまうと、Mail は /var/mail/ユーザ名へのリンクを空の mbox ファイルに置き換えてしまいますので、再びローカルメールを受信するにはリンクを張り直さなければなりません。

<p>尤もそのような場合は、‘mbox’が生きたリンクなのか、それとも再度リンクしなおす必要があるのかを確認するスクリプトをスケジュールに沿って実行させるように cron を使えばいいわけですが… :-)


<hr>

<p><i><b>タスクが意図した日時に起動されているかどうか知る方法はありますか？</b></i>

<p>上記のメールアカウントを設定してスクリプト／プログラムからの出力を確認する、またはスクリプトからテストファイルを touch （“touch /tmp/crontest”）して、このファイルのタイムスタンプを確認する、などの方法があります。</p>
<p>cron の動作を手っ取り早く確認するには、テキストエディットなどのプログラムを CronniX のメインウインドウにドラッグ＆ドロップし、1 分後に起動するように設定して様子を見てみましょう。</p>

<hr>

<p><i><b>私の crontab が壊れてしまい CronniX で読み込めなくなってしまいました。どうすればよいでしょう？</b></i>

<p>ターミナルで次のコマンドを入力してあなたの crontab を見てみましょう：<br>
crontab -l<br>
（アイの大文字ではなくエルの小文字です）

<p>crontab を削除して一からやりなおすには次のようにします：<br>
crontab -r

<p>テキストエディタで編集できるファイルに crontab を保存するには、次を実行します：<br>
crontab -l > ~/my_crontab<br>
これは、あなたのホームディレクトリ内の‘my_crontab’というファイルに crontab を‘パイプ’します。

<p>‘my_crontab’を編集したら（テキストエディットで編集する場合は‘標準テキスト’形式で保存してください。RTF 形式は cron とは仲良くありません）、次のようにしてインストールします：<br>
crontab ~/my_crontab

<p>以上、cron に関するかんたんな解説でした。これでわかったからといって CronniX が捨てられてしまうようなことにならなければ幸いです。

<hr>
<a href="welcome.html" target=_right>ホーム</a>

</BODY>
</HTML>